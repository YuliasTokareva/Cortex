# Cortex
Cortex - веб-приложение на Django для отслеживания учебных целей, курсов и навыков с интеграцией Telegram-бота и полной аутентификацией. 
Cortex — это многофункциональная система для учебы и не только, объединяющая веб-интерфейс и Telegram-бота.  
Пользователи могут управлять целями, заметками, дедлайнами как через сайт, так и через удобные команды в Telegram — все данные синхронизируются в реальном времени.

# Цель проекта:
Создать персонализированную, гибкую систему, которая:
- Работает в любом месте (веб + Telegram)  
- Не требует ручного переноса данных  
- Поддерживает рефлексию и планирование через цели и дедлайны  
- Может быть легко расширена и усовершенствована (например, добавлением уведомлений или аналитики)

# Возможности проекта
Веб-интерфейс:
- Регистрация и авторизация пользователей  
- Создание, редактирование и удаление:
  - Целей (академических и личных)
  - Заметок по предметам или идеям
  - Дедлайнов с указанием даты и времени
- Гибкая фильтрация и просмотр данных  
- Админка Django для управления всем контентом
Telegram-бот:
- Команда /start — привязка аккаунта Telegram к учётной записи  
- /add_goal <текст> — добавление цели  
- /add_note <текст> — добавление заметки  
- /info — просмотр всех ваших данных в одном сообщении  
- /goals, /notes, /deadlines — отображение списков по категориям  
- Автоматическая синхронизация с веб-данными
(в своем Telegram можно настроить Telegram-бота так, чтобы команды отображались при нажатии '/'; для этого зарегистрируйте их в @BotFather)

# Интеграция и удобство
- Все данные единые: изменения в Telegram мгновенно отражаются на сайте и наоборот  
- Поддержка таймзон (время дедлайнов корректно отображается везде)  
- Удобные подсказки команд через @BotFather(об этом чуть позже)

# Интеграция и удобство
- Все данные единые: изменения в Telegram мгновенно отражаются на сайте и наоборот  
- Поддержка таймзон (время дедлайнов корректно отображается везде)  
- Удобные подсказки команд через @BotFather

# Тестирование и надёжность
Полное покрытие тестами и их успешное и корректное завершение для:
  - Модели (`Goal`, `Note` , `Deadline`, `TelegramProfile`)
  - Веб-views (CRUD, редиректы, шаблоны)
  - Логика Telegram-бота (через async_to_sync и моки)

# Технологии
- Backend: Python 3.9, Django 4.x  
- Frontend: HTML, CSS, Bootstrap 5  
- База данных: SQLite (для разработки), легко масштабируется до PostgreSQL  
- Telegram-бот: python-telegram-bot (асинхронный фреймворк, библиотека для работы с Telegram API)  
- Окружение и запуск:
  - Виртуальное окружение (`venv`) — изоляция зависимостей Python
  - Docker + Docker Compose — контейнеризация веб-приложения (через Gunicorn)
- Тестирование: pytest с использованием asgiref.sync и моки  
- Вспомогательные инструменты: 
  - python-decouple — безопасная загрузка переменных окружения (например: токена бота)
  - asgiref — поддержка асинхронности при взаимодействии с синхронным Django ORM

# Установка и запуск (перед началом реализации прочитайте инструкцию ПОЛНОСТЬЮ, особенно пункт №5)
1. Клонирование репозитория
git clone https://github.com/YuliasTokareva/Cortex.git
2. Настройка окружения
Создайте файл .env в корне проекта: TELEGRAM_BOT_TOKEN=ваш_токен_от_@BotFather
DEBUG=True
3. Создание виртуального окружения (для бота и локальной разработки), установка зависимостей и применение миграций
   1. python -m venv venv_cortex
      source venv_cortex/bin/activate  # macOS / Linux
      Или: venv_cortex\Scripts\activate  # Windows
   2. pip install -r requirements.txt
   3. python manage.py migrate
4. Создание суперпользователя (обязательно!)
   python manage.py createsuperuser
Следуйте инструкциям: укажите логин, email (можно пропустить) и надёжный пароль.  
Это нужно, чтобы:
- Войти в админку Django
- Управлять пользователями, целями, заметками и Telegram-привязками вручную
5. (Опционально) Создание тестового пользователя
Если в проекте нет публичной регистрации — создайте обычного пользователя через shell:
Привязка Telegram ID к аккаунту (обязательно!)
    1. Узнайте свой Telegram ID (для этого в телеграмме найди [@userinfobot](https://t.me/userinfobot) и выполни команду /start - так ты получишь нужную тебе информацию)  
    2. Вернись в приложение, где запускаешь проект. В новой вкладке терминала, открытой для запуска Telegram-бота, выполни: python manage.py shell
    3. Далее ыполните эти команды в этом же окне терминала:
   from django.contrib.auth.models import User
   from dashboard.models import TelegramProfile
   user = User.objects.get(username='ваш_логин')
   TelegramProfile.objects.create(user=user, telegram_id='ваш_id')
   ! в 'ваш_id' пишите информацию, полученную от @userinfobot, а в 'ваш_логин' - логин, который указывали при создании суперпользователя
6. Запуск веб-интерфейса (в Docker)
docker compose up --build
7. Запуск Telegram-бота (локально, в новой вкладке терминала)
Активировать виртуальное окружение (так как Docker для бота не используется):
source venv_cortex/bin/activate
Запуск:
python dashboard/telegram_bot.py
8. Запуск тестов (именно в том терминале, где запускали Docker)  
Тесты покрывают:
- Создание и валидацию моделей  
- Работу веб-форм и редиректов  
- Логику получения пользователя по Telegram ID  
- Сохранение данных через команды бота

# Структура проекта
Cortex/
├── cortex/                  # Настройки Django
├── dashboard/               # Основное приложение
│   ├── models.py            # Модели: Goal, Note, Deadline, TelegramProfile
│   ├── views.py             # Веб-контроллеры
│   ├── urls.py              # Маршруты с namespace='dashboard'
│   ├── telegram_bot.py      # Асинхронный Telegram-бот
│   └── tests.py             # Полный набор тестов
├── templates/               # HTML-шаблоны
├── static/                  # CSS, JS, изображения
├── docker-compose.yml       # Запуск веба в контейнере
├── Dockerfile               # Сборка образа
├── requirements.txt         # Зависимости
├── .env                     # Переменные окружения (пример: .env.example)
└── manage.py                # Точка входа Django